-- 允许备注列修改
UPDATE `grid_column_config` SET `ID`='4028ae316ab3e108016ab4382da40009', `fk_action_grid_config_id`='classHotelDetail', `name`='备注', `dataindex`='note', `data_column`='', `search`='1', `to_add`='0', `to_update`='1', `column_can_update`='0', `list`='1', `report`='1', `type`='TextField', `dateFormat`='yyyy-MM-dd', `allow_blank`='1', `max_length`='50', `check_message`='', `check_regular`='', `text_field_parameters`=NULL, `combo_sql`='', `serial_number`='9', `flag_active`='4028809c1d625bcf011d66fd0dda0006', `flag_bak`=NULL, `user_type`=NULL, `team`='', `s_note`='', `sql_result`='', `is_html`=NULL, `default_text`='', `cascade_columns`=NULL WHERE (`ID`='4028ae316ab3e108016ab4382da40009');
UPDATE `grid_menu_config` SET `id`='30538', `fk_grid_id`='classHotelDetail', `flag_menu_type`=NULL, `flag_integrated_menu_type`='fc43396e479a11e89697fcaa140ebf84', `text`='修改', `show_type`='', `column_type`='', `fix`=NULL, `must_select_row`='0', `select_limit`='0', `data_index`='', `null_text`=NULL, `show_confirm`=NULL, `confirm_text`=NULL, `url`=NULL, `extra_parameters`=NULL, `waiting_msg`=NULL, `success_msg`=NULL, `error_msg`=NULL, `open_mode`=NULL, `form_config`=NULL, `user_type`=NULL, `flag_is_valid`='2', `serial_number`='2', `script`=NULL, `column_data_index`=NULL, `value`=NULL, `tips`=NULL, `extend_menu_config`=NULL WHERE (`id`='30538');

-- 修改 项目安排\项目安排查看 查询sql(更改查询条件)
UPDATE `grid_basic_config` SET `id`='trainingItemArrange', `title`='项目安排', `can_search`='1', `can_add`='1', `can_delete`='1', `can_update`='1', `can_batch_add`='0', `can_projections`='0', `first_search`='0', `entity_class`='com.whaty.domain.bean.TrainingItem', `note`=NULL, `list_type`='1', `dc`='', `flag_active`='4028809c1d625bcf011d66fd0dda0006', `flag_bak`=NULL, `dateFormat`=NULL, `sqlstr`='SELECT\n  this.id as id,\n  peUnit.name as unitName,\n  peUnit.id as unitId,\n  this.code as code,\n  this.name as name,\n  enumConstByFlagItemStatus.name as itemStatus,\n  enumConstByFlagItemStatus.id as itemStatusId,\n  this.check_date as checkDate,\n  enumConstByFlagTrainingType.name as trainingType,\n  enumConstByFlagTrainingTarget.name as trainingTarget,\n  enumConstByFlagTrainingType.id as trainingTypeId,\n  enumConstByFlagTrainingTarget.id as trainingTargetId,\n  this.training_start_time as trainingStartTime,\n  this.training_end_time as trainingEndTime,\n  this.training_person_number as trainingPersonNumber,\n  this.total_fee as totalFee,\n  this.collect_fee_unit as collectFeeUnit,\n  this.apportion_date as apportionDate,\n  this.arrange_date as arrangeDate,\n  apportionUser.LOGIN_ID as apportionUser,\n  arrangeUnit.name as arrangeUnitName,\n  arrangeUser.LOGIN_ID as arrangeUser,\n  if(trainingItemApply.id is null,\'未申请\',\'已申请\') as applyStatus,\n  trainingItemApply.apply_date as applyDate,\n  trainingItemApply.LOGIN_ID as applyBy\nFROM\n	training_item this \nINNER JOIN pe_unit peUnit on peUnit.id=this.fk_unit_id  AND [peUnit|peUnit.id]\nINNER JOIN enum_const enumConstByFlagItemStatus on enumConstByFlagItemStatus.id=this.flag_item_status\nAND enumConstByFlagItemStatus.code=\'3\' \nINNER JOIN enum_const enumConstByFlagIsApportion on enumConstByFlagIsApportion.id=this.flag_is_apportion\nAND enumConstByFlagIsApportion.code=\'1\'\nINNER JOIN enum_const enumConstByFlagTrainingType on enumConstByFlagTrainingType.id=this.flag_training_type\nINNER JOIN enum_const enumConstByFlagTrainingTarget on enumConstByFlagTrainingTarget.id=this.flag_training_target\nINNER JOIN enum_const enumConstByFlagTrainingItemType on enumConstByFlagTrainingItemType.id=this.flag_training_item_type\nLEFT JOIN sso_user apportionUser on apportionUser.id=this.fk_apportion_user_id\nLEFT JOIN sso_user arrangeUser on arrangeUser.id=this.fk_arrange_user_id\nLEFT JOIN pe_unit arrangeUnit on arrangeUnit.id=this.fk_arrange_unit_id \nINNER JOIN (\nSELECT\n	trainingItemApply.id AS id,\n	trainingItemApply.fk_training_item_id AS fk_training_item_id,\n	trainingItemApply.apply_date AS apply_date,\n	applyBy.LOGIN_ID AS LOGIN_ID\nFROM\n	training_item_apply trainingItemApply\nINNER JOIN pe_unit applyUnit ON applyUnit.id = trainingItemApply.fk_unit_id\nINNER JOIN sso_user applyBy ON applyBy.id = trainingItemApply.fk_apply_user_id\n) trainingItemApply on trainingItemApply.fk_training_item_id=this.id\nLEFT JOIN pe_class cl on cl.fk_training_item_id=this.id\nwhere this.site_code = \'${siteCode}\'\nGROUP BY this.id', `statistics`=NULL, `s_note`=NULL, `update_note`=NULL, `is_enum`=NULL, `countsql`=NULL, `isGroupSql`='0', `LIST_FUNCTION`='0', `FLAG_INTE_ACTIVE`=NULL, `fk_web_site_id`='4028ae316a09ee85016a09f4d7640000', `can_checked_all`='1', `add_mode`=NULL, `add_cmp_name`=NULL, `fk_chart_id`=NULL WHERE (`id`='trainingItemArrange');
UPDATE `grid_basic_config` SET `id`='showtrainingItemArrangeInfo', `title`='项目安排查看', `can_search`='1', `can_add`='1', `can_delete`='1', `can_update`='1', `can_batch_add`='0', `can_projections`='0', `first_search`='0', `entity_class`='com.whaty.domain.bean.TrainingItem', `note`=NULL, `list_type`='1', `dc`='', `flag_active`='4028809c1d625bcf011d66fd0dda0006', `flag_bak`=NULL, `dateFormat`=NULL, `sqlstr`='SELECT\n  this.id as id,\n  peUnit.name as unitName,\n  peUnit.id as unitId,\n  this.code as code,\n  this.name as name,\n  enumConstByFlagItemStatus.name as itemStatus,\n  enumConstByFlagItemStatus.id as itemStatusId,\n  this.check_date as checkDate,\n  enumConstByFlagTrainingType.name as trainingType,\n  enumConstByFlagTrainingTarget.name as trainingTarget,\n  enumConstByFlagTrainingType.id as trainingTypeId,\n  enumConstByFlagTrainingTarget.id as trainingTargetId,\n  this.training_start_time as trainingStartTime,\n  this.training_end_time as trainingEndTime,\n  this.training_person_number as trainingPersonNumber,\n  this.total_fee as totalFee,\n  this.collect_fee_unit as collectFeeUnit,\n  this.apportion_date as apportionDate,\n  this.arrange_date as arrangeDate,\n  apportionUser.LOGIN_ID as apportionUser,\n  arrangeUnit.name as arrangeUnitName,\n  arrangeUser.LOGIN_ID as arrangeUser,\n  if(trainingItemApply.id is null,\'未申请\',\'已申请\') as applyStatus,\n  trainingItemApply.apply_date as applyDate,\n  trainingItemApply.LOGIN_ID as applyBy\nFROM\n	training_item this \nINNER JOIN pe_unit peUnit on peUnit.id=this.fk_unit_id  AND [peUnit|peUnit.id] and peUnit.site_code=\'${siteCode}\'\nINNER JOIN enum_const enumConstByFlagItemStatus on enumConstByFlagItemStatus.id=this.flag_item_status\nAND enumConstByFlagItemStatus.code=\'3\' \nINNER JOIN enum_const enumConstByFlagIsApportion on enumConstByFlagIsApportion.id=this.flag_is_apportion\nAND enumConstByFlagIsApportion.code=\'1\'\nINNER JOIN enum_const enumConstByFlagTrainingType on enumConstByFlagTrainingType.id=this.flag_training_type\nINNER JOIN enum_const enumConstByFlagTrainingTarget on enumConstByFlagTrainingTarget.id=this.flag_training_target\nINNER JOIN enum_const enumConstByFlagTrainingItemType on enumConstByFlagTrainingItemType.id=this.flag_training_item_type\nLEFT JOIN sso_user apportionUser on apportionUser.id=this.fk_apportion_user_id\nLEFT JOIN sso_user arrangeUser on arrangeUser.id=this.fk_arrange_user_id\nLEFT JOIN pe_unit arrangeUnit on arrangeUnit.id=this.fk_arrange_unit_id \nINNER JOIN (\nSELECT\n	trainingItemApply.id AS id,\n	trainingItemApply.fk_training_item_id AS fk_training_item_id,\n	trainingItemApply.apply_date AS apply_date,\n	applyBy.LOGIN_ID AS LOGIN_ID\nFROM\n	training_item_apply trainingItemApply\nINNER JOIN pe_unit applyUnit ON applyUnit.id = trainingItemApply.fk_unit_id AND [peUnit|applyUnit.id]\nINNER JOIN sso_user applyBy ON applyBy.id = trainingItemApply.fk_apply_user_id\n) trainingItemApply on trainingItemApply.fk_training_item_id=this.id\nLEFT JOIN pe_class cl on cl.fk_training_item_id=this.id\nGROUP BY this.id', `statistics`=NULL, `s_note`=NULL, `update_note`=NULL, `is_enum`=NULL, `countsql`=NULL, `isGroupSql`='0', `LIST_FUNCTION`='0', `FLAG_INTE_ACTIVE`=NULL, `fk_web_site_id`='4028ae316a09ee85016a09f4d7640000', `can_checked_all`='1', `add_mode`=NULL, `add_cmp_name`=NULL, `fk_chart_id`=NULL WHERE (`id`='showtrainingItemArrangeInfo');

-- 更新查询sql
UPDATE `grid_column_config` SET `ID`='4028ae316a61d982016a6204193e0014', `fk_action_grid_config_id`='classManage', `name`='班主任', `dataindex`='classMaster.name', `data_column`=NULL, `search`='1', `to_add`='1', `to_update`='1', `column_can_update`='0', `list`='1', `report`='1', `type`='TextField', `dateFormat`=NULL, `allow_blank`='1', `max_length`='50', `check_message`=NULL, `check_regular`=NULL, `text_field_parameters`=NULL, `combo_sql`='select tea.id, tea.true_name from pe_teacher tea inner join enum_const ic on ic.id = tea.flag_isclassmaster where ic.code = \'1\' AND tea.site_code = \'${siteCode}\'', `serial_number`='20', `flag_active`='4028809c1d625bcf011d66fd0dda0006', `flag_bak`=NULL, `user_type`=NULL, `team`=NULL, `s_note`=NULL, `sql_result`=NULL, `is_html`=NULL, `default_text`=NULL, `cascade_columns`=NULL WHERE (`ID`='4028ae316a61d982016a6204193e0014');
-- 取消横向权限
UPDATE `grid_basic_config` SET `id`='trainingItemApply', `title`='项目申请', `can_search`='1', `can_add`='1', `can_delete`='1', `can_update`='1', `can_batch_add`='0', `can_projections`='0', `first_search`='0', `entity_class`='com.whaty.domain.bean.TrainingItem', `note`=NULL, `list_type`='1', `dc`='', `flag_active`='4028809c1d625bcf011d66fd0dda0006', `flag_bak`=NULL, `dateFormat`=NULL, `sqlstr`='SELECT\n  this.id as id,\n  peUnit.name as unitName,\n  peUnit.id as unitId,\n  this.code as code,\n  this.name as name,\n  enumConstByFlagItemStatus.name as itemStatus,\n  enumConstByFlagItemStatus.id as itemStatusId,\n  this.check_date as checkDate,\n  enumConstByFlagTrainingType.name as trainingType,\n  enumConstByFlagTrainingTarget.name as trainingTarget,\n  enumConstByFlagTrainingType.id as trainingTypeId,\n  enumConstByFlagTrainingTarget.id as trainingTargetId,\n  this.training_start_time as trainingStartTime,\n  this.training_end_time as trainingEndTime,\n  this.training_person_number as trainingPersonNumber,\n  this.total_fee as totalFee,\n  this.collect_fee_unit as collectFeeUnit,\n  this.apportion_date as apportionDate,\n  this.arrange_date as arrangeDate,\n  apportionUser.LOGIN_ID as apportionUser,\n  arrangeUnit.name as arrangeUnitName,\n  arrangeUser.LOGIN_ID as arrangeUser,\n  if(trainingItemApply.id is null,\'未申请\',\'已申请\') as applyStatus,\n  trainingItemApply.apply_date as applyDate,\n  trainingItemApply.LOGIN_ID as applyBy\nFROM\n	training_item this \nINNER JOIN pe_unit peUnit on peUnit.id=this.fk_unit_id \nINNER JOIN enum_const enumConstByFlagItemStatus on enumConstByFlagItemStatus.id=this.flag_item_status\nAND enumConstByFlagItemStatus.code=\'3\' \nINNER JOIN enum_const enumConstByFlagIsApportion on enumConstByFlagIsApportion.id=this.flag_is_apportion\nINNER JOIN enum_const enumConstByFlagTrainingType on enumConstByFlagTrainingType.id=this.flag_training_type\nINNER JOIN enum_const enumConstByFlagTrainingTarget on enumConstByFlagTrainingTarget.id=this.flag_training_target\nINNER JOIN enum_const enumConstByFlagTrainingItemType on enumConstByFlagTrainingItemType.id=this.flag_training_item_type\nLEFT JOIN sso_user apportionUser on apportionUser.id=this.fk_apportion_user_id\nLEFT JOIN sso_user arrangeUser on arrangeUser.id=this.fk_arrange_user_id\nLEFT JOIN pe_unit arrangeUnit on arrangeUnit.id=this.fk_arrange_unit_id \nLEFT JOIN (\nSELECT\n	trainingItemApply.id AS id,\n	trainingItemApply.fk_training_item_id AS fk_training_item_id,\n	trainingItemApply.apply_date AS apply_date,\n	applyBy.LOGIN_ID AS LOGIN_ID\nFROM\n	training_item_apply trainingItemApply\nINNER JOIN pe_unit applyUnit ON applyUnit.id = trainingItemApply.fk_unit_id AND [peUnit|applyUnit.id]\nINNER JOIN sso_user applyBy ON applyBy.id = trainingItemApply.fk_apply_user_id\n) trainingItemApply on trainingItemApply.fk_training_item_id=this.id\nLEFT JOIN pe_class cl on cl.fk_training_item_id=this.id\nWHERE\n   cl.id is null\nand this.site_code = \'${siteCode}\'\nAND enumConstByFlagTrainingItemType.code = \'2\'\nAND enumConstByFlagIsApportion.code = \'1\'\nAND this.fk_arrange_unit_id is null\nGROUP BY this.id', `statistics`=NULL, `s_note`=NULL, `update_note`=NULL, `is_enum`=NULL, `countsql`=NULL, `isGroupSql`='0', `LIST_FUNCTION`='0', `FLAG_INTE_ACTIVE`=NULL, `fk_web_site_id`='4028ae316a09ee85016a09f4d7640000', `can_checked_all`='1', `add_mode`=NULL, `add_cmp_name`=NULL, `fk_chart_id`=NULL WHERE (`id`='trainingItemApply');
