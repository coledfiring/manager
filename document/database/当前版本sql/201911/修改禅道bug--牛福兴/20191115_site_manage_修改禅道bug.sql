update grid_menu_config set text = '打印结业证书' where text = '打印毕业证书';
UPDATE `grid_basic_config` SET `sqlstr`='SELECT\n	md5(concat(unitId, trainingTypeId, trainingUnitId, trainingModeId)) AS id,\n	r.unitName AS unitName,\n	r.trainingType AS trainingType,\n	r.trainingUnit AS trainingUnit,\n	r.trainingMode AS trainingMode,\n	sum(r.societyClass) AS societyClass,\n	sum(r.societyStudent) AS societyStudent,\n	sum(r.cooperateClass) AS cooperateClass,\n	sum(r.cooperateStudent) AS cooperateStudent,\n	sum(r.totalClass) AS totalClass,\n	sum(r.totalStudent) AS totalStudent,\n	r.startTime as startTime,\n	r.endTime as endTime,\n	sum(r.totalFee) AS totalFee,\n	sum(IF (r.feeStatusCode = \'2\',r.totalFee,0)) AS passFee,\n	r.unitId as unitId,\n	r.trainingTypeId as trainingTypeId,\n	r.trainingUnitId as trainingUnitId,\n	r.trainingModeId as trainingModeId,\r\n	r.feeStatus as feeStatus\nFROM\n	(\n		SELECT\n			ti.id AS id,\n			un.id AS unitId,\n			un. NAME AS unitName,\n			tt.id AS trainingTypeId,\n			tt. NAME AS trainingType,\n			tn.id AS trainingUnitId,\n			tn. NAME AS trainingUnit,\n			tm.id AS trainingModeId,\n			tm. NAME AS trainingMode,\n      c.start_time as startTime,\n			c.end_time as endTime,\n			count(distinct IF(it. CODE = \'1\', c.id, NULL)) AS societyClass,\n			count(distinct IF (it. CODE = \'1\', stu.id, NULL)) AS societyStudent,\n			count(distinct  IF(it. CODE = \'2\', c.id, NULL)) AS cooperateClass,\n			count(distinct IF (it. CODE = \'2\', stu.id, NULL)) AS cooperateStudent,\n			count(distinct c.id) AS totalClass,\n			count(distinct stu.id) AS totalStudent,\n			c.training_total_fee AS totalFee,\n			st. CODE AS feeStatusCode,\r\n			st.name as feeStatus\n		FROM\n			training_item ti\n		INNER JOIN pe_Class c ON c.fk_training_item_id = ti.id\n		INNER JOIN pe_unit un ON un.id = c.fk_unit_id AND [peUnit|un.id]\n		INNER JOIN enum_const it ON it.id = ti.flag_training_item_type\n    INNER JOIN enum_const tt on tt.id = ti.flag_training_type\n		INNER JOIN pe_unit tn ON tn.id = ti.fk_unit_id\n		INNER JOIN enum_const tm ON tm.id = c.flag_training_mode\n		LEFT JOIN pe_student stu ON stu.fk_class_id = c.id\n		INNER JOIN enum_const st ON st.id = c.flag_settle_account_status\n    where c.site_code = \'${siteCode}\'\n		GROUP BY\n			c.id\n	) r\nGROUP BY\n	unitId,\n	trainingTypeId,\n	trainingUnitId,\n	trainingModeId' WHERE (`id`='feeAnalyseByItem');
UPDATE `grid_basic_config` SET `sqlstr`='SELECT\n	md5(concat(h.id, c.id)) AS id,\n	h. NAME AS hotelName,\n	h.address AS address,\n	c. NAME AS className,\n	c.start_time AS startTime,\n	c.end_time AS endTime,\n        chd.start_time as hotelStartTime,\n        chd.end_time as hotelEndTime,\n	count(DISTINCT stu.id) AS studentNumber,\n	un. NAME AS unitName,\n	c.room_fee AS roomFee\nFROM\n	pe_hotel h\nINNER JOIN class_hotel_arrange cha ON cha.fk_hotel_id = h.id\nINNER JOIN class_hotel_detail chd ON chd.id = cha.fk_class_hotel_detail_id\nINNER JOIN pe_class c ON c.fk_class_hotel_detail_id = chd.id\nINNER JOIN pe_unit un ON un.id = c.fk_unit_id AND [peUnit|un.id]\nLEFT JOIN pe_student stu ON stu.fk_class_id = c.id\nWHERE\n       c.site_code = \'${siteCode}\'\nGROUP BY\n	h.id,\n	c.id' WHERE (`id`='hotelUsageAnalyse');
delete from grid_menu_permission where menu_id in (select id from grid_menu_config where fk_grid_id = 'addClassCourse' and text = '返回');
delete from grid_menu_config where fk_grid_id = 'addClassCourse' and text = '返回';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"addClassCourse\", \"params\": {\"isShowNav\": true, \"isShowBack\": true}}' WHERE `fk_grid_id`='classCourseManage' and `text`='添加';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"sendAllMessage\", \"fieldName\": \"parentId\", "params": {\"templateCode\": \"teacherResourceManage\"}}' WHERE `fk_grid_id`='teacherResourceManage' and `text`='发送消息';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"sendAllMessage\", \"fieldName\": \"parentId\", \"templateCode\": \"siteManagerManage\"}' WHERE `fk_grid_id`='siteManagerManage' and `text`='发送消息';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"courseSource\", \"isShowNav\": false}}' WHERE `fk_grid_id`='courseResourceManage' and `text`='附件管理';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"trainingItem\", \"isShowNav\": false}}' WHERE `fk_grid_id`='societyTrainingItemApply' and `text`='附件管理';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"trainingItem\", \"isShowNav\": false}}' WHERE `fk_grid_id`='cooperationTrainingItemApply' and `text`='附件管理';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"showAttachFile\", "params": {\"namespace\": \"trainingItem\", \"isShowNav\": false}}' WHERE `fk_grid_id`='cooperationTrainingItemCheck' and `text`='附件查看';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"showAttachFile\", "params": {\"namespace\": \"trainingItem\", \"isShowNav\": false}}' WHERE `fk_grid_id`='cooperationTrainingItemSearch' and `text`='附件查看';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"showAttachFile\", "params": {\"namespace\": \"trainingItem\", \"isShowNav\": false}}' WHERE `fk_grid_id`='societyTrainingItemCheck' and `text`='附件查看';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"showAttachFile\", "params": {\"namespace\": \"trainingItem\", \"isShowNav\": false}}' WHERE `fk_grid_id`='societyTrainingItemSearch' and `text`='附件查看';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"peClass\", \"isShowNav\": false}}' WHERE `fk_grid_id`='classManage' and `text`='附件管理';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"showAttachFile\", "params": {\"namespace\": \"peClass\", \"isShowNav\": false}}' WHERE `fk_grid_id`='classSearch' and `text`='附件查看';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"toCheckFlow\", \"fieldName\": \"parentId\", "params": {\"type\": \"1\"}}' WHERE `fk_grid_id`='societyTrainingItemCheck' and `text`='审批';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"toCheckFlow\", \"fieldName\": \"parentId\", "params": {\"type\": \"1\"}}' WHERE `fk_grid_id`='societyTrainingItemSearch' and `text`='查看审批结果';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"toCheckFlow\", \"fieldName\": \"parentId\", "params": {\"type\": \"2\"}}' WHERE `fk_grid_id`='cooperationTrainingItemCheck' and `text`='审批';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"toCheckFlow\", \"fieldName\": \"parentId\", "params": {\"type\": \"2\"}}' WHERE `fk_grid_id`='cooperationTrainingItemSearch' and `text`='查看审批结果';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"toCheckFlow\", \"fieldName\": \"parentId\", "params": {\"type\": \"4\"}}' WHERE `fk_grid_id`='settleAccountCheck' and `text`='审批';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"toCheckFlow\", \"fieldName\": \"parentId\", "params": {\"type\": \"4\"}}' WHERE `fk_grid_id`='settleAccountSearch' and `text`='查看审批结果';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"toCheckFlow\", \"fieldName\": \"parentId\", "params": {\"type\": \"3\"}}' WHERE `fk_grid_id`='itemCompletionCheck' and `text`='审批';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"hotelAgreement\", \"isShowNav\": false}}' WHERE `fk_grid_id`='hotelResourceManage' and `text`='合作协议';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"trainingCertificate\", \"isShowNav\": false}}' WHERE `fk_grid_id`='trainingCertificateManage' and `text`='证书上传';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"cooperateUnit\", \"isShowNav\": false}}' WHERE `fk_grid_id`='cooperateUnitManage' and `text`='上传合作协议';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"useSealManage\", \"isShowNav\": false}}' WHERE `fk_grid_id`='useSealManage' and `text`='用印文件';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"pePrintingManage\", \"isShowNav\": false}}' WHERE `fk_grid_id`='pePrinting' and `text`='附件';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"peReceivedManage\", \"isShowNav\": false}}' WHERE `fk_grid_id`='received' and `text`='附件';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"requirementInfoFollowUp\", \"isShowNav\": false}' WHERE `fk_grid_id`='requirementInfoFollowUpList' and `text`='附件管理';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"showAttachFile\", "params": {\"namespace\": \"requirementInfoFollowUp\", \"isShowNav\": false}}' WHERE `fk_grid_id`='requirementInfoSearch' and `text`='附件查看';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"fieldName\": \"parentId\", \"routerName\": \"attachFileManage\", "params": {\"namespace\": \"peReviewManage\", \"isShowNav\": false}}' WHERE `fk_grid_id`='peReviewManage' and `text`='附件';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"sendAllMessage\", \"fieldName\": \"parentId\", "params": {\"templateCode\": \"peStudentMessage\"}}' WHERE `fk_grid_id`='studentSearch' and `text`='发送消息';
UPDATE `grid_menu_config` SET `extend_menu_config`='{\"routerName\": \"moreGridTabs\", \"fieldName\": \"parentId\", "params": {\"configUrl\": \"/entity/clazz/classManage/detailConfig\", \"namespace\": \"peClass\", \"isShowNav\": false, \"isShowBack\": false}}' WHERE `fk_grid_id`='classManage' and `text`='班级详情管理';
delete from grid_menu_permission where menu_id in (select id from grid_menu_config where fk_grid_id = 'classManage' and text in ('附件管理', '课程管理', '学员管理', '课表安排', '培训学员管理'));
delete from grid_menu_config where fk_grid_id = 'classManage' and text in ('附件管理', '课程管理', '学员管理', '课表安排', '培训学员管理');
UPDATE `grid_column_config` SET `ID`='4028ae316a53d5c1016a53db1168001e', `fk_action_grid_config_id`='societyTrainingItemApply', `name`='培训费总额', `dataindex`='totalFee', `data_column`=NULL, `search`='1', `to_add`='1', `to_update`='1', `column_can_update`='0', `list`='1', `report`='1', `type`='TextField', `dateFormat`=NULL, `allow_blank`='0', `max_length`='50', `check_message`='必须为1-9,999,999位的整数或小数', `check_regular`='^[0-9]{1,7}(\\.[0-9]{1,2})?$', `text_field_parameters`=NULL, `combo_sql`=NULL, `serial_number`='30', `flag_active`='4028809c1d625bcf011d66fd0dda0006', `flag_bak`=NULL, `user_type`=NULL, `team`=NULL, `s_note`=NULL, `sql_result`=NULL, `is_html`=NULL, `default_text`=NULL, `cascade_columns`=NULL WHERE (`ID`='4028ae316a53d5c1016a53db1168001e');
UPDATE `grid_column_config` SET `ID`='4028ae316a53d5c1016a53de8beb0064', `fk_action_grid_config_id`='societyTrainingItemCheck', `name`='培训费总额', `dataindex`='totalFee', `data_column`=NULL, `search`='1', `to_add`='0', `to_update`='0', `column_can_update`='0', `list`='1', `report`='1', `type`='TextField', `dateFormat`=NULL, `allow_blank`='1', `max_length`='50', `check_message`=NULL, `check_regular`=NULL, `text_field_parameters`=NULL, `combo_sql`=NULL, `serial_number`='30', `flag_active`='4028809c1d625bcf011d66fd0dda0006', `flag_bak`=NULL, `user_type`=NULL, `team`=NULL, `s_note`=NULL, `sql_result`=NULL, `is_html`=NULL, `default_text`=NULL, `cascade_columns`=NULL WHERE (`ID`='4028ae316a53d5c1016a53de8beb0064');
UPDATE `grid_column_config` SET `ID`='4028ae316a53d5c1016a53decb620087', `fk_action_grid_config_id`='societyTrainingItemSearch', `name`='培训费总额', `dataindex`='totalFee', `data_column`=NULL, `search`='1', `to_add`='0', `to_update`='0', `column_can_update`='0', `list`='1', `report`='1', `type`='TextField', `dateFormat`=NULL, `allow_blank`='1', `max_length`='50', `check_message`=NULL, `check_regular`=NULL, `text_field_parameters`=NULL, `combo_sql`=NULL, `serial_number`='30', `flag_active`='4028809c1d625bcf011d66fd0dda0006', `flag_bak`=NULL, `user_type`=NULL, `team`=NULL, `s_note`=NULL, `sql_result`=NULL, `is_html`=NULL, `default_text`=NULL, `cascade_columns`=NULL WHERE (`ID`='4028ae316a53d5c1016a53decb620087');
UPDATE `grid_column_config` SET `ID`='4028ae316c898a53016c89b1a3c30002', `fk_action_grid_config_id`='checkFlowGroupManage', `name`='是否需要审批', `dataindex`='enumConstByFlagNeedCheck.name', `data_column`='', `search`='1', `to_add`='1', `to_update`='1', `column_can_update`='0', `list`='1', `report`='1', `type`='TextField', `dateFormat`='yyyy-MM-dd', `allow_blank`='0', `max_length`='50', `check_message`='', `check_regular`='', `text_field_parameters`=NULL, `combo_sql`='', `serial_number`='3', `flag_active`='4028809c1d625bcf011d66fd0dda0006', `flag_bak`=NULL, `user_type`=NULL, `team`='', `s_note`='', `sql_result`='', `is_html`=NULL, `default_text`='', `cascade_columns`=NULL WHERE (`ID`='4028ae316c898a53016c89b1a3c30002');
INSERT INTO `grid_menu_config` (`fk_grid_id`, `flag_menu_type`, `flag_integrated_menu_type`, `text`, `show_type`, `column_type`, `fix`, `must_select_row`, `select_limit`, `data_index`, `null_text`, `show_confirm`, `confirm_text`, `url`, `extra_parameters`, `waiting_msg`, `success_msg`, `error_msg`, `open_mode`, `form_config`, `user_type`, `flag_is_valid`, `serial_number`, `script`, `column_data_index`, `value`, `tips`, `extend_menu_config`) VALUES ('teacherResourceManage', 'cb245573ff1a11e7ab1d001e671d0be8', NULL, '解除小程序绑定', 'top', 'left', '0', '1', '0', 'id', '', '1', '', '/entity/resource/teacherResourceManage/unbindWeChatAppUser', NULL, '', NULL, NULL, '_blank', NULL, NULL, '2', '5', NULL, NULL, NULL, '', '');
INSERT INTO `grid_menu_config` (`fk_grid_id`, `flag_menu_type`, `flag_integrated_menu_type`, `text`, `show_type`, `column_type`, `fix`, `must_select_row`, `select_limit`, `data_index`, `null_text`, `show_confirm`, `confirm_text`, `url`, `extra_parameters`, `waiting_msg`, `success_msg`, `error_msg`, `open_mode`, `form_config`, `user_type`, `flag_is_valid`, `serial_number`, `script`, `column_data_index`, `value`, `tips`, `extend_menu_config`) VALUES ('studentSearch', 'cb245573ff1a11e7ab1d001e671d0be8', NULL, '解除小程序绑定', 'top', 'left', '0', '1', '0', 'id', '', '1', '', '/entity/clazz/studentSearch/unbindWeChatAppUser', NULL, '', NULL, NULL, '_blank', NULL, NULL, '2', '4', NULL, NULL, NULL, '', '');

